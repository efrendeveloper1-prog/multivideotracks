"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/studio/page",{

/***/ "(app-pages-browser)/./hooks/useAudioEngine.tsx":
/*!**********************************!*\
  !*** ./hooks/useAudioEngine.tsx ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioEngineProvider: function() { return /* binding */ AudioEngineProvider; },\n/* harmony export */   useAudioEngine: function() { return /* binding */ useAudioEngine; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\nconst AudioEngineContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nconst useAudioEngine = ()=>{\n    _s();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AudioEngineContext);\n    if (!context) throw new Error(\"useAudioEngine must be used within AudioEngineProvider\");\n    return context;\n};\n_s(useAudioEngine, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nconst AudioEngineProvider = (param)=>{\n    let { children } = param;\n    _s1();\n    const [tracks, setTracks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [masterVolume, setMasterVolume] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const [playlist, setPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeSongId, setActiveSongId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const sourceNodesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    const gainNodesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    const masterGainRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const startTimeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const pauseTimeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const animationFrameRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    // Initialize AudioContext\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const AudioCtx = window.AudioContext || window.webkitAudioContext;\n        audioContextRef.current = new AudioCtx();\n        masterGainRef.current = audioContextRef.current.createGain();\n        masterGainRef.current.connect(audioContextRef.current.destination);\n        return ()=>{\n            var _audioContextRef_current;\n            (_audioContextRef_current = audioContextRef.current) === null || _audioContextRef_current === void 0 ? void 0 : _audioContextRef_current.close();\n        };\n    }, []);\n    // Master Volume Effect\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (masterGainRef.current) {\n            masterGainRef.current.gain.value = masterVolume;\n        }\n    }, [\n        masterVolume\n    ]);\n    // Color helper\n    const getTrackColor = (name)=>{\n        const n = name.toLowerCase();\n        if (n.includes(\"drum\") || n.includes(\"bateria\")) return \"#06b6d4\";\n        if (n.includes(\"bass\") || n.includes(\"bajo\")) return \"#0d9488\";\n        if (n.includes(\"vox\") || n.includes(\"voz\") || n.includes(\"vocal\")) return \"#2563eb\";\n        if (n.includes(\"click\")) return \"#dc2626\";\n        if (n.includes(\"key\") || n.includes(\"piano\") || n.includes(\"synth\")) return \"#d946ef\";\n        if (n.includes(\"guitar\") || n.includes(\"guit\")) return \"#f59e0b\";\n        if (n.includes(\"video\")) return \"#a855f7\";\n        return \"#94a3b8\";\n    };\n    const addTrack = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (file, name)=>{\n        if (!audioContextRef.current) return;\n        try {\n            const arrayBuffer = await file.arrayBuffer();\n            const audioBuffer = await audioContextRef.current.decodeAudioData(arrayBuffer);\n            const newTrack = {\n                id: crypto.randomUUID(),\n                name,\n                file,\n                buffer: audioBuffer,\n                volume: 1,\n                muted: false,\n                soloed: false,\n                color: getTrackColor(name)\n            };\n            setTracks((prev)=>[\n                    ...prev,\n                    newTrack\n                ]);\n            setDuration((prev)=>Math.max(prev, audioBuffer.duration));\n        } catch (e) {\n            console.error(\"Error decoding audio\", e);\n        }\n    }, []);\n    const addVideoTrack = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (videoFile)=>{\n        if (!audioContextRef.current) return;\n        const url = URL.createObjectURL(videoFile);\n        // 1. Create the visual VIDEO TRACK (no buffer, for timeline thumbnails)\n        const videoTrack = {\n            id: crypto.randomUUID(),\n            name: \"VIDEO TRACK\",\n            file: videoFile,\n            buffer: undefined,\n            volume: 1,\n            muted: false,\n            soloed: false,\n            color: \"#a855f7\"\n        };\n        // 2. Try to extract audio from video and create a separate audio channel\n        let audioTrack = null;\n        try {\n            const arrayBuffer = await videoFile.arrayBuffer();\n            const audioBuffer = await audioContextRef.current.decodeAudioData(arrayBuffer.slice(0));\n            audioTrack = {\n                id: crypto.randomUUID(),\n                name: \"VIDEO AUDIO\",\n                file: videoFile,\n                buffer: audioBuffer,\n                volume: 1,\n                muted: false,\n                soloed: false,\n                color: \"#c084fc\",\n                isVideoAudio: true\n            };\n        } catch (e) {\n            console.warn(\"Video has no extractable audio or decode failed:\", e);\n        }\n        setTracks((prev)=>{\n            const newTracks = [\n                ...prev,\n                videoTrack\n            ];\n            if (audioTrack) newTracks.push(audioTrack);\n            return newTracks;\n        });\n        // Emit event for the UI to catch and set video src\n        const customEvent = new CustomEvent(\"video-uploaded\", {\n            detail: url\n        });\n        window.dispatchEvent(customEvent);\n        // Get video duration\n        const tempVideo = document.createElement(\"video\");\n        tempVideo.src = url;\n        tempVideo.onloadedmetadata = ()=>{\n            setDuration((prev)=>Math.max(prev, tempVideo.duration));\n        };\n    }, []);\n    const clearTracks = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        stopAudioInternal();\n        setTracks([]);\n        setDuration(0);\n        setCurrentTime(0);\n        pauseTimeRef.current = 0;\n        setIsPlaying(false);\n    }, []);\n    const stopAudioInternal = ()=>{\n        sourceNodesRef.current.forEach((source)=>{\n            try {\n                source.stop();\n            } catch (e) {}\n        });\n        sourceNodesRef.current.clear();\n        gainNodesRef.current.clear();\n    };\n    const playAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((startOffset)=>{\n        if (!audioContextRef.current || !masterGainRef.current) return;\n        if (audioContextRef.current.state === \"suspended\") {\n            audioContextRef.current.resume();\n        }\n        const anySolo = tracks.some((t)=>t.soloed);\n        tracks.forEach((track)=>{\n            if (!track.buffer) return; // Skip VIDEO TRACK (no buffer)\n            const source = audioContextRef.current.createBufferSource();\n            source.buffer = track.buffer;\n            const gainNode = audioContextRef.current.createGain();\n            const shouldLogicallyMute = track.muted || anySolo && !track.soloed;\n            gainNode.gain.value = shouldLogicallyMute ? 0 : track.volume;\n            source.connect(gainNode);\n            gainNode.connect(masterGainRef.current);\n            source.start(0, startOffset);\n            sourceNodesRef.current.set(track.id, source);\n            gainNodesRef.current.set(track.id, gainNode);\n            source.onended = ()=>{};\n        });\n    }, [\n        tracks\n    ]);\n    const stopAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        stopAudioInternal();\n    }, []);\n    const togglePlay = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (isPlaying) {\n            stopAudioInternal();\n            pauseTimeRef.current = currentTime;\n            if (videoRef.current) videoRef.current.pause();\n            cancelAnimationFrame(animationFrameRef.current);\n        } else {\n            let start = pauseTimeRef.current;\n            if (start >= duration && duration > 0) {\n                start = 0;\n                pauseTimeRef.current = 0;\n            }\n            playAudio(start);\n            startTimeRef.current = audioContextRef.current.currentTime - start;\n            if (videoRef.current) {\n                videoRef.current.currentTime = start;\n                videoRef.current.play().catch((e)=>console.error(\"Video play failed\", e));\n            }\n            const update = ()=>{\n                const now = audioContextRef.current.currentTime;\n                const calculatedTime = now - startTimeRef.current;\n                if (calculatedTime >= duration && duration > 0) {\n                    stop();\n                    return;\n                }\n                setCurrentTime(calculatedTime);\n                animationFrameRef.current = requestAnimationFrame(update);\n            };\n            animationFrameRef.current = requestAnimationFrame(update);\n        }\n        setIsPlaying(!isPlaying);\n    }, [\n        isPlaying,\n        currentTime,\n        playAudio,\n        duration\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        stopAudioInternal();\n        if (videoRef.current) {\n            videoRef.current.pause();\n            videoRef.current.currentTime = 0;\n        }\n        pauseTimeRef.current = 0;\n        setCurrentTime(0);\n        setIsPlaying(false);\n        cancelAnimationFrame(animationFrameRef.current);\n    }, []);\n    const seek = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((time)=>{\n        const wasPlaying = isPlaying;\n        if (wasPlaying) stopAudioInternal();\n        pauseTimeRef.current = time;\n        setCurrentTime(time);\n        if (videoRef.current) {\n            videoRef.current.currentTime = time;\n        }\n        if (wasPlaying) {\n            playAudio(time);\n            startTimeRef.current = audioContextRef.current.currentTime - time;\n        }\n    }, [\n        isPlaying,\n        playAudio\n    ]);\n    // Live Volume/Mute/Solo updates\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const anySolo = tracks.some((t)=>t.soloed);\n        tracks.forEach((track)=>{\n            const shouldLogicallyMute = track.muted || anySolo && !track.soloed;\n            const targetVolume = shouldLogicallyMute ? 0 : track.volume;\n            if (track.name === \"VIDEO TRACK\" && videoRef.current) {\n                videoRef.current.volume = targetVolume * masterVolume;\n                videoRef.current.muted = shouldLogicallyMute;\n            } else {\n                const gainNode = gainNodesRef.current.get(track.id);\n                if (gainNode && audioContextRef.current) {\n                    gainNode.gain.cancelScheduledValues(audioContextRef.current.currentTime);\n                    gainNode.gain.setTargetAtTime(targetVolume, audioContextRef.current.currentTime, 0.05);\n                }\n            }\n        });\n    }, [\n        tracks,\n        masterVolume\n    ]);\n    const setTrackVolume = (id, volume)=>{\n        setTracks((prev)=>prev.map((t)=>t.id === id ? {\n                    ...t,\n                    volume\n                } : t));\n    };\n    const toggleTrackMute = (id)=>{\n        setTracks((prev)=>prev.map((t)=>t.id === id ? {\n                    ...t,\n                    muted: !t.muted\n                } : t));\n    };\n    const toggleTrackSolo = (id)=>{\n        setTracks((prev)=>prev.map((t)=>t.id === id ? {\n                    ...t,\n                    soloed: !t.soloed\n                } : t));\n    };\n    const removeTrack = (id)=>{\n        setTracks((prev)=>prev.filter((t)=>t.id !== id));\n    };\n    // Playlist management\n    const addSongToPlaylist = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((song)=>{\n        setPlaylist((prev)=>[\n                ...prev,\n                song\n            ]);\n    }, []);\n    const removeSongFromPlaylist = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setPlaylist((prev)=>prev.filter((s)=>s.id !== id));\n    }, []);\n    const loadSong = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        const song = playlist.find((s)=>s.id === id);\n        if (!song) return;\n        // Stop current playback and clear tracks\n        stopAudioInternal();\n        cancelAnimationFrame(animationFrameRef.current);\n        setIsPlaying(false);\n        setCurrentTime(0);\n        pauseTimeRef.current = 0;\n        setDuration(0);\n        setTracks([]);\n        setActiveSongId(id);\n        // Load all stem files\n        for (const stemFile of song.stemFiles){\n            const trackName = stemFile.name.replace(/\\.(wav|mp3)$/i, \"\");\n            await addTrack(stemFile, trackName);\n        }\n        // Load video if present\n        if (song.videoFile) {\n            await addVideoTrack(song.videoFile);\n        }\n    }, [\n        playlist,\n        addTrack,\n        addVideoTrack\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AudioEngineContext.Provider, {\n        value: {\n            tracks,\n            isPlaying,\n            currentTime,\n            duration,\n            addTrack,\n            addVideoTrack,\n            removeTrack,\n            clearTracks,\n            togglePlay,\n            stop,\n            seek,\n            setTrackVolume,\n            toggleTrackMute,\n            toggleTrackSolo,\n            setVideoElement: (el)=>videoRef.current = el,\n            masterVolume,\n            setMasterVolume,\n            playlist,\n            activeSongId,\n            addSongToPlaylist,\n            removeSongFromPlaylist,\n            loadSong\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Efren\\\\Documents\\\\Proyectos\\\\multivideotrack\\\\hooks\\\\useAudioEngine.tsx\",\n        lineNumber: 381,\n        columnNumber: 9\n    }, undefined);\n};\n_s1(AudioEngineProvider, \"M2bLMrYbdcr/jF8E2K4HeQ5K4TU=\");\n_c = AudioEngineProvider;\nvar _c;\n$RefreshReg$(_c, \"AudioEngineProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUF1ZGlvRW5naW5lLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW1HO0FBbURuRyxNQUFNTyxtQ0FBcUJOLG9EQUFhQSxDQUFnQztBQUVqRSxNQUFNTyxpQkFBaUI7O0lBQzFCLE1BQU1DLFVBQVVQLGlEQUFVQSxDQUFDSztJQUMzQixJQUFJLENBQUNFLFNBQVMsTUFBTSxJQUFJQyxNQUFNO0lBQzlCLE9BQU9EO0FBQ1gsRUFBRTtHQUpXRDtBQU1OLE1BQU1HLHNCQUErRDtRQUFDLEVBQUVDLFFBQVEsRUFBRTs7SUFDckYsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdWLCtDQUFRQSxDQUFVLEVBQUU7SUFDaEQsTUFBTSxDQUFDVyxXQUFXQyxhQUFhLEdBQUdaLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2EsYUFBYUMsZUFBZSxHQUFHZCwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNlLFVBQVVDLFlBQVksR0FBR2hCLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU0sQ0FBQ2lCLGNBQWNDLGdCQUFnQixHQUFHbEIsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDbUIsVUFBVUMsWUFBWSxHQUFHcEIsK0NBQVFBLENBQVMsRUFBRTtJQUNuRCxNQUFNLENBQUNxQixjQUFjQyxnQkFBZ0IsR0FBR3RCLCtDQUFRQSxDQUFnQjtJQUVoRSxNQUFNdUIsa0JBQWtCeEIsNkNBQU1BLENBQXNCO0lBQ3BELE1BQU15QixpQkFBaUJ6Qiw2Q0FBTUEsQ0FBcUMsSUFBSTBCO0lBQ3RFLE1BQU1DLGVBQWUzQiw2Q0FBTUEsQ0FBd0IsSUFBSTBCO0lBQ3ZELE1BQU1FLGdCQUFnQjVCLDZDQUFNQSxDQUFrQjtJQUM5QyxNQUFNNkIsV0FBVzdCLDZDQUFNQSxDQUEwQjtJQUNqRCxNQUFNOEIsZUFBZTlCLDZDQUFNQSxDQUFTO0lBQ3BDLE1BQU0rQixlQUFlL0IsNkNBQU1BLENBQVM7SUFDcEMsTUFBTWdDLG9CQUFvQmhD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QUM7WUFDQWMsaUJBQWlCLENBQUNDLEtBQU9ySCxTQUFTUSxPQUFPLEdBQUc2RztZQUM1Q2hJO1lBQ0FDO1lBQ0FDO1lBQ0FFO1lBQ0FnSDtZQUNBRTtZQUNBRTtRQUNKO2tCQUNLakk7Ozs7OztBQUdiLEVBQUU7SUE1VldEO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUF1ZGlvRW5naW5lLnRzeD8xMGZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuLy8gVHlwZXNcclxuZXhwb3J0IGludGVyZmFjZSBUcmFjayB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZmlsZTogRmlsZTtcclxuICAgIGJ1ZmZlcj86IEF1ZGlvQnVmZmVyO1xyXG4gICAgdm9sdW1lOiBudW1iZXI7XHJcbiAgICBtdXRlZDogYm9vbGVhbjtcclxuICAgIHNvbG9lZDogYm9vbGVhbjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBpc1ZpZGVvQXVkaW8/OiBib29sZWFuOyAvLyBGbGFnIGZvciB0aGUgZXh0cmFjdGVkIGF1ZGlvIGZyb20gdmlkZW9cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTb25nIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgYXJ0aXN0OiBzdHJpbmc7XHJcbiAgICBrZXk6IHN0cmluZztcclxuICAgIGJwbTogbnVtYmVyO1xyXG4gICAgc3RlbUZpbGVzOiBGaWxlW107XHJcbiAgICB2aWRlb0ZpbGU/OiBGaWxlO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQXVkaW9FbmdpbmVDb250ZXh0VHlwZSB7XHJcbiAgICB0cmFja3M6IFRyYWNrW107XHJcbiAgICBpc1BsYXlpbmc6IGJvb2xlYW47XHJcbiAgICBjdXJyZW50VGltZTogbnVtYmVyO1xyXG4gICAgZHVyYXRpb246IG51bWJlcjtcclxuICAgIGFkZFRyYWNrOiAoZmlsZTogRmlsZSwgbmFtZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgYWRkVmlkZW9UcmFjazogKGZpbGU6IEZpbGUpID0+IFByb21pc2U8dm9pZD47XHJcbiAgICByZW1vdmVUcmFjazogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBjbGVhclRyYWNrczogKCkgPT4gdm9pZDtcclxuICAgIHRvZ2dsZVBsYXk6ICgpID0+IHZvaWQ7XHJcbiAgICBzdG9wOiAoKSA9PiB2b2lkO1xyXG4gICAgc2VlazogKHRpbWU6IG51bWJlcikgPT4gdm9pZDtcclxuICAgIHNldFRyYWNrVm9sdW1lOiAoaWQ6IHN0cmluZywgdm9sdW1lOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgICB0b2dnbGVUcmFja011dGU6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgdG9nZ2xlVHJhY2tTb2xvOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIHNldFZpZGVvRWxlbWVudDogKGVsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQgfCBudWxsKSA9PiB2b2lkO1xyXG4gICAgbWFzdGVyVm9sdW1lOiBudW1iZXI7XHJcbiAgICBzZXRNYXN0ZXJWb2x1bWU6ICh2YWw6IG51bWJlcikgPT4gdm9pZDtcclxuICAgIC8vIFBsYXlsaXN0XHJcbiAgICBwbGF5bGlzdDogU29uZ1tdO1xyXG4gICAgYWN0aXZlU29uZ0lkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgYWRkU29uZ1RvUGxheWxpc3Q6IChzb25nOiBTb25nKSA9PiB2b2lkO1xyXG4gICAgcmVtb3ZlU29uZ0Zyb21QbGF5bGlzdDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBsb2FkU29uZzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XHJcbn1cclxuXHJcbmNvbnN0IEF1ZGlvRW5naW5lQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8QXVkaW9FbmdpbmVDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUF1ZGlvRW5naW5lID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQXVkaW9FbmdpbmVDb250ZXh0KTtcclxuICAgIGlmICghY29udGV4dCkgdGhyb3cgbmV3IEVycm9yKCd1c2VBdWRpb0VuZ2luZSBtdXN0IGJlIHVzZWQgd2l0aGluIEF1ZGlvRW5naW5lUHJvdmlkZXInKTtcclxuICAgIHJldHVybiBjb250ZXh0O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IEF1ZGlvRW5naW5lUHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcclxuICAgIGNvbnN0IFt0cmFja3MsIHNldFRyYWNrc10gPSB1c2VTdGF0ZTxUcmFja1tdPihbXSk7XHJcbiAgICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgW2N1cnJlbnRUaW1lLCBzZXRDdXJyZW50VGltZV0gPSB1c2VTdGF0ZSgwKTtcclxuICAgIGNvbnN0IFtkdXJhdGlvbiwgc2V0RHVyYXRpb25dID0gdXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCBbbWFzdGVyVm9sdW1lLCBzZXRNYXN0ZXJWb2x1bWVdID0gdXNlU3RhdGUoMSk7XHJcbiAgICBjb25zdCBbcGxheWxpc3QsIHNldFBsYXlsaXN0XSA9IHVzZVN0YXRlPFNvbmdbXT4oW10pO1xyXG4gICAgY29uc3QgW2FjdGl2ZVNvbmdJZCwgc2V0QWN0aXZlU29uZ0lkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICAgIGNvbnN0IGF1ZGlvQ29udGV4dFJlZiA9IHVzZVJlZjxBdWRpb0NvbnRleHQgfCBudWxsPihudWxsKTtcclxuICAgIGNvbnN0IHNvdXJjZU5vZGVzUmVmID0gdXNlUmVmPE1hcDxzdHJpbmcsIEF1ZGlvQnVmZmVyU291cmNlTm9kZT4+KG5ldyBNYXAoKSk7XHJcbiAgICBjb25zdCBnYWluTm9kZXNSZWYgPSB1c2VSZWY8TWFwPHN0cmluZywgR2Fpbk5vZGU+PihuZXcgTWFwKCkpO1xyXG4gICAgY29uc3QgbWFzdGVyR2FpblJlZiA9IHVzZVJlZjxHYWluTm9kZSB8IG51bGw+KG51bGwpO1xyXG4gICAgY29uc3QgdmlkZW9SZWYgPSB1c2VSZWY8SFRNTFZpZGVvRWxlbWVudCB8IG51bGw+KG51bGwpO1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lUmVmID0gdXNlUmVmPG51bWJlcj4oMCk7XHJcbiAgICBjb25zdCBwYXVzZVRpbWVSZWYgPSB1c2VSZWY8bnVtYmVyPigwKTtcclxuICAgIGNvbnN0IGFuaW1hdGlvbkZyYW1lUmVmID0gdXNlUmVmPG51bWJlcj4oKTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplIEF1ZGlvQ29udGV4dFxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBjb25zdCBBdWRpb0N0eCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dDtcclxuICAgICAgICBhdWRpb0NvbnRleHRSZWYuY3VycmVudCA9IG5ldyBBdWRpb0N0eCgpO1xyXG4gICAgICAgIG1hc3RlckdhaW5SZWYuY3VycmVudCA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmNyZWF0ZUdhaW4oKTtcclxuICAgICAgICBtYXN0ZXJHYWluUmVmLmN1cnJlbnQuY29ubmVjdChhdWRpb0NvbnRleHRSZWYuY3VycmVudC5kZXN0aW5hdGlvbik7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQ/LmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICAvLyBNYXN0ZXIgVm9sdW1lIEVmZmVjdFxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAobWFzdGVyR2FpblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIG1hc3RlckdhaW5SZWYuY3VycmVudC5nYWluLnZhbHVlID0gbWFzdGVyVm9sdW1lO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFttYXN0ZXJWb2x1bWVdKTtcclxuXHJcbiAgICAvLyBDb2xvciBoZWxwZXJcclxuICAgIGNvbnN0IGdldFRyYWNrQ29sb3IgPSAobmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbiA9IG5hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAobi5pbmNsdWRlcygnZHJ1bScpIHx8IG4uaW5jbHVkZXMoJ2JhdGVyaWEnKSkgcmV0dXJuICcjMDZiNmQ0JztcclxuICAgICAgICBpZiAobi5pbmNsdWRlcygnYmFzcycpIHx8IG4uaW5jbHVkZXMoJ2Jham8nKSkgcmV0dXJuICcjMGQ5NDg4JztcclxuICAgICAgICBpZiAobi5pbmNsdWRlcygndm94JykgfHwgbi5pbmNsdWRlcygndm96JykgfHwgbi5pbmNsdWRlcygndm9jYWwnKSkgcmV0dXJuICcjMjU2M2ViJztcclxuICAgICAgICBpZiAobi5pbmNsdWRlcygnY2xpY2snKSkgcmV0dXJuICcjZGMyNjI2JztcclxuICAgICAgICBpZiAobi5pbmNsdWRlcygna2V5JykgfHwgbi5pbmNsdWRlcygncGlhbm8nKSB8fCBuLmluY2x1ZGVzKCdzeW50aCcpKSByZXR1cm4gJyNkOTQ2ZWYnO1xyXG4gICAgICAgIGlmIChuLmluY2x1ZGVzKCdndWl0YXInKSB8fCBuLmluY2x1ZGVzKCdndWl0JykpIHJldHVybiAnI2Y1OWUwYic7XHJcbiAgICAgICAgaWYgKG4uaW5jbHVkZXMoJ3ZpZGVvJykpIHJldHVybiAnI2E4NTVmNyc7XHJcbiAgICAgICAgcmV0dXJuICcjOTRhM2I4JztcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYWRkVHJhY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsZTogRmlsZSwgbmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV3VHJhY2s6IFRyYWNrID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgZmlsZSxcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYXVkaW9CdWZmZXIsXHJcbiAgICAgICAgICAgICAgICB2b2x1bWU6IDEsXHJcbiAgICAgICAgICAgICAgICBtdXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzb2xvZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IGdldFRyYWNrQ29sb3IobmFtZSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdUcmFja10pO1xyXG4gICAgICAgICAgICBzZXREdXJhdGlvbihwcmV2ID0+IE1hdGgubWF4KHByZXYsIGF1ZGlvQnVmZmVyLmR1cmF0aW9uKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVjb2RpbmcgYXVkaW9cIiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIGNvbnN0IGFkZFZpZGVvVHJhY2sgPSB1c2VDYWxsYmFjayhhc3luYyAodmlkZW9GaWxlOiBGaWxlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHZpZGVvRmlsZSk7XHJcblxyXG4gICAgICAgIC8vIDEuIENyZWF0ZSB0aGUgdmlzdWFsIFZJREVPIFRSQUNLIChubyBidWZmZXIsIGZvciB0aW1lbGluZSB0aHVtYm5haWxzKVxyXG4gICAgICAgIGNvbnN0IHZpZGVvVHJhY2s6IFRyYWNrID0ge1xyXG4gICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICAgICAgICAgICAgbmFtZTogXCJWSURFTyBUUkFDS1wiLFxyXG4gICAgICAgICAgICBmaWxlOiB2aWRlb0ZpbGUsXHJcbiAgICAgICAgICAgIGJ1ZmZlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB2b2x1bWU6IDEsXHJcbiAgICAgICAgICAgIG11dGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgc29sb2VkOiBmYWxzZSxcclxuICAgICAgICAgICAgY29sb3I6ICcjYTg1NWY3J1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIDIuIFRyeSB0byBleHRyYWN0IGF1ZGlvIGZyb20gdmlkZW8gYW5kIGNyZWF0ZSBhIHNlcGFyYXRlIGF1ZGlvIGNoYW5uZWxcclxuICAgICAgICBsZXQgYXVkaW9UcmFjazogVHJhY2sgfCBudWxsID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHZpZGVvRmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IGF3YWl0IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlci5zbGljZSgwKSk7XHJcblxyXG4gICAgICAgICAgICBhdWRpb1RyYWNrID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlZJREVPIEFVRElPXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxlOiB2aWRlb0ZpbGUsXHJcbiAgICAgICAgICAgICAgICBidWZmZXI6IGF1ZGlvQnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgdm9sdW1lOiAxLFxyXG4gICAgICAgICAgICAgICAgbXV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc29sb2VkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2MwODRmYycsXHJcbiAgICAgICAgICAgICAgICBpc1ZpZGVvQXVkaW86IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlZpZGVvIGhhcyBubyBleHRyYWN0YWJsZSBhdWRpbyBvciBkZWNvZGUgZmFpbGVkOlwiLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3VHJhY2tzID0gWy4uLnByZXYsIHZpZGVvVHJhY2tdO1xyXG4gICAgICAgICAgICBpZiAoYXVkaW9UcmFjaykgbmV3VHJhY2tzLnB1c2goYXVkaW9UcmFjayk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdUcmFja3M7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEVtaXQgZXZlbnQgZm9yIHRoZSBVSSB0byBjYXRjaCBhbmQgc2V0IHZpZGVvIHNyY1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd2aWRlby11cGxvYWRlZCcsIHsgZGV0YWlsOiB1cmwgfSk7XHJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xyXG5cclxuICAgICAgICAvLyBHZXQgdmlkZW8gZHVyYXRpb25cclxuICAgICAgICBjb25zdCB0ZW1wVmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xyXG4gICAgICAgIHRlbXBWaWRlby5zcmMgPSB1cmw7XHJcbiAgICAgICAgdGVtcFZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldER1cmF0aW9uKHByZXYgPT4gTWF0aC5tYXgocHJldiwgdGVtcFZpZGVvLmR1cmF0aW9uKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBjbGVhclRyYWNrcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgICAgICBzdG9wQXVkaW9JbnRlcm5hbCgpO1xyXG4gICAgICAgIHNldFRyYWNrcyhbXSk7XHJcbiAgICAgICAgc2V0RHVyYXRpb24oMCk7XHJcbiAgICAgICAgc2V0Q3VycmVudFRpbWUoMCk7XHJcbiAgICAgICAgcGF1c2VUaW1lUmVmLmN1cnJlbnQgPSAwO1xyXG4gICAgICAgIHNldElzUGxheWluZyhmYWxzZSk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgY29uc3Qgc3RvcEF1ZGlvSW50ZXJuYWwgPSAoKSA9PiB7XHJcbiAgICAgICAgc291cmNlTm9kZXNSZWYuY3VycmVudC5mb3JFYWNoKHNvdXJjZSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7IHNvdXJjZS5zdG9wKCk7IH0gY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvdXJjZU5vZGVzUmVmLmN1cnJlbnQuY2xlYXIoKTtcclxuICAgICAgICBnYWluTm9kZXNSZWYuY3VycmVudC5jbGVhcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwbGF5QXVkaW8gPSB1c2VDYWxsYmFjaygoc3RhcnRPZmZzZXQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICghYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgfHwgIW1hc3RlckdhaW5SZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LnJlc3VtZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYW55U29sbyA9IHRyYWNrcy5zb21lKHQgPT4gdC5zb2xvZWQpO1xyXG5cclxuICAgICAgICB0cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdHJhY2suYnVmZmVyKSByZXR1cm47IC8vIFNraXAgVklERU8gVFJBQ0sgKG5vIGJ1ZmZlcilcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50IS5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuICAgICAgICAgICAgc291cmNlLmJ1ZmZlciA9IHRyYWNrLmJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQhLmNyZWF0ZUdhaW4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkTG9naWNhbGx5TXV0ZSA9IHRyYWNrLm11dGVkIHx8IChhbnlTb2xvICYmICF0cmFjay5zb2xvZWQpO1xyXG4gICAgICAgICAgICBnYWluTm9kZS5nYWluLnZhbHVlID0gc2hvdWxkTG9naWNhbGx5TXV0ZSA/IDAgOiB0cmFjay52b2x1bWU7XHJcblxyXG4gICAgICAgICAgICBzb3VyY2UuY29ubmVjdChnYWluTm9kZSk7XHJcbiAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QobWFzdGVyR2FpblJlZi5jdXJyZW50ISk7XHJcbiAgICAgICAgICAgIHNvdXJjZS5zdGFydCgwLCBzdGFydE9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICBzb3VyY2VOb2Rlc1JlZi5jdXJyZW50LnNldCh0cmFjay5pZCwgc291cmNlKTtcclxuICAgICAgICAgICAgZ2Fpbk5vZGVzUmVmLmN1cnJlbnQuc2V0KHRyYWNrLmlkLCBnYWluTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBzb3VyY2Uub25lbmRlZCA9ICgpID0+IHsgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFt0cmFja3NdKTtcclxuXHJcbiAgICBjb25zdCBzdG9wQXVkaW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgc3RvcEF1ZGlvSW50ZXJuYWwoKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCB0b2dnbGVQbGF5ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgICAgIGlmIChpc1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgc3RvcEF1ZGlvSW50ZXJuYWwoKTtcclxuICAgICAgICAgICAgcGF1c2VUaW1lUmVmLmN1cnJlbnQgPSBjdXJyZW50VGltZTtcclxuICAgICAgICAgICAgaWYgKHZpZGVvUmVmLmN1cnJlbnQpIHZpZGVvUmVmLmN1cnJlbnQucGF1c2UoKTtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHBhdXNlVGltZVJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPj0gZHVyYXRpb24gJiYgZHVyYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICBwYXVzZVRpbWVSZWYuY3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBsYXlBdWRpbyhzdGFydCk7XHJcbiAgICAgICAgICAgIHN0YXJ0VGltZVJlZi5jdXJyZW50ID0gYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQhLmN1cnJlbnRUaW1lIC0gc3RhcnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodmlkZW9SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmlkZW9SZWYuY3VycmVudC5jdXJyZW50VGltZSA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgdmlkZW9SZWYuY3VycmVudC5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKFwiVmlkZW8gcGxheSBmYWlsZWRcIiwgZSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBhdWRpb0NvbnRleHRSZWYuY3VycmVudCEuY3VycmVudFRpbWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxjdWxhdGVkVGltZSA9IG5vdyAtIHN0YXJ0VGltZVJlZi5jdXJyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWxjdWxhdGVkVGltZSA+PSBkdXJhdGlvbiAmJiBkdXJhdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lKGNhbGN1bGF0ZWRUaW1lKTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lUmVmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRJc1BsYXlpbmcoIWlzUGxheWluZyk7XHJcbiAgICB9LCBbaXNQbGF5aW5nLCBjdXJyZW50VGltZSwgcGxheUF1ZGlvLCBkdXJhdGlvbl0pO1xyXG5cclxuICAgIGNvbnN0IHN0b3AgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgc3RvcEF1ZGlvSW50ZXJuYWwoKTtcclxuICAgICAgICBpZiAodmlkZW9SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICB2aWRlb1JlZi5jdXJyZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHZpZGVvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXVzZVRpbWVSZWYuY3VycmVudCA9IDA7XHJcbiAgICAgICAgc2V0Q3VycmVudFRpbWUoMCk7XHJcbiAgICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcclxuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ISk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgY29uc3Qgc2VlayA9IHVzZUNhbGxiYWNrKCh0aW1lOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCB3YXNQbGF5aW5nID0gaXNQbGF5aW5nO1xyXG4gICAgICAgIGlmICh3YXNQbGF5aW5nKSBzdG9wQXVkaW9JbnRlcm5hbCgpO1xyXG5cclxuICAgICAgICBwYXVzZVRpbWVSZWYuY3VycmVudCA9IHRpbWU7XHJcbiAgICAgICAgc2V0Q3VycmVudFRpbWUodGltZSk7XHJcblxyXG4gICAgICAgIGlmICh2aWRlb1JlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHZpZGVvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSB0aW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdhc1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgcGxheUF1ZGlvKHRpbWUpO1xyXG4gICAgICAgICAgICBzdGFydFRpbWVSZWYuY3VycmVudCA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50IS5jdXJyZW50VGltZSAtIHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW2lzUGxheWluZywgcGxheUF1ZGlvXSk7XHJcblxyXG4gICAgLy8gTGl2ZSBWb2x1bWUvTXV0ZS9Tb2xvIHVwZGF0ZXNcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYW55U29sbyA9IHRyYWNrcy5zb21lKHQgPT4gdC5zb2xvZWQpO1xyXG5cclxuICAgICAgICB0cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZExvZ2ljYWxseU11dGUgPSB0cmFjay5tdXRlZCB8fCAoYW55U29sbyAmJiAhdHJhY2suc29sb2VkKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Vm9sdW1lID0gc2hvdWxkTG9naWNhbGx5TXV0ZSA/IDAgOiB0cmFjay52b2x1bWU7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhY2submFtZSA9PT0gXCJWSURFTyBUUkFDS1wiICYmIHZpZGVvUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZpZGVvUmVmLmN1cnJlbnQudm9sdW1lID0gdGFyZ2V0Vm9sdW1lICogbWFzdGVyVm9sdW1lO1xyXG4gICAgICAgICAgICAgICAgdmlkZW9SZWYuY3VycmVudC5tdXRlZCA9IHNob3VsZExvZ2ljYWxseU11dGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYWluTm9kZSA9IGdhaW5Ob2Rlc1JlZi5jdXJyZW50LmdldCh0cmFjay5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2Fpbk5vZGUgJiYgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYWluTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdWRpb0NvbnRleHRSZWYuY3VycmVudC5jdXJyZW50VGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRUYXJnZXRBdFRpbWUodGFyZ2V0Vm9sdW1lLCBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5jdXJyZW50VGltZSwgMC4wNSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sIFt0cmFja3MsIG1hc3RlclZvbHVtZV0pO1xyXG5cclxuICAgIGNvbnN0IHNldFRyYWNrVm9sdW1lID0gKGlkOiBzdHJpbmcsIHZvbHVtZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSBpZCA/IHsgLi4udCwgdm9sdW1lIH0gOiB0KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRvZ2dsZVRyYWNrTXV0ZSA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSBpZCA/IHsgLi4udCwgbXV0ZWQ6ICF0Lm11dGVkIH0gOiB0KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRvZ2dsZVRyYWNrU29sbyA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSBpZCA/IHsgLi4udCwgc29sb2VkOiAhdC5zb2xvZWQgfSA6IHQpKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVtb3ZlVHJhY2sgPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IHByZXYuZmlsdGVyKHQgPT4gdC5pZCAhPT0gaWQpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUGxheWxpc3QgbWFuYWdlbWVudFxyXG4gICAgY29uc3QgYWRkU29uZ1RvUGxheWxpc3QgPSB1c2VDYWxsYmFjaygoc29uZzogU29uZykgPT4ge1xyXG4gICAgICAgIHNldFBsYXlsaXN0KHByZXYgPT4gWy4uLnByZXYsIHNvbmddKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCByZW1vdmVTb25nRnJvbVBsYXlsaXN0ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBzZXRQbGF5bGlzdChwcmV2ID0+IHByZXYuZmlsdGVyKHMgPT4gcy5pZCAhPT0gaWQpKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBsb2FkU29uZyA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc29uZyA9IHBsYXlsaXN0LmZpbmQocyA9PiBzLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKCFzb25nKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFN0b3AgY3VycmVudCBwbGF5YmFjayBhbmQgY2xlYXIgdHJhY2tzXHJcbiAgICAgICAgc3RvcEF1ZGlvSW50ZXJuYWwoKTtcclxuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ISk7XHJcbiAgICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcclxuICAgICAgICBzZXRDdXJyZW50VGltZSgwKTtcclxuICAgICAgICBwYXVzZVRpbWVSZWYuY3VycmVudCA9IDA7XHJcbiAgICAgICAgc2V0RHVyYXRpb24oMCk7XHJcbiAgICAgICAgc2V0VHJhY2tzKFtdKTtcclxuICAgICAgICBzZXRBY3RpdmVTb25nSWQoaWQpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIGFsbCBzdGVtIGZpbGVzXHJcbiAgICAgICAgZm9yIChjb25zdCBzdGVtRmlsZSBvZiBzb25nLnN0ZW1GaWxlcykge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFja05hbWUgPSBzdGVtRmlsZS5uYW1lLnJlcGxhY2UoL1xcLih3YXZ8bXAzKSQvaSwgJycpO1xyXG4gICAgICAgICAgICBhd2FpdCBhZGRUcmFjayhzdGVtRmlsZSwgdHJhY2tOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExvYWQgdmlkZW8gaWYgcHJlc2VudFxyXG4gICAgICAgIGlmIChzb25nLnZpZGVvRmlsZSkge1xyXG4gICAgICAgICAgICBhd2FpdCBhZGRWaWRlb1RyYWNrKHNvbmcudmlkZW9GaWxlKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbcGxheWxpc3QsIGFkZFRyYWNrLCBhZGRWaWRlb1RyYWNrXSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8QXVkaW9FbmdpbmVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XHJcbiAgICAgICAgICAgIHRyYWNrcyxcclxuICAgICAgICAgICAgaXNQbGF5aW5nLFxyXG4gICAgICAgICAgICBjdXJyZW50VGltZSxcclxuICAgICAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgICAgIGFkZFRyYWNrLFxyXG4gICAgICAgICAgICBhZGRWaWRlb1RyYWNrLFxyXG4gICAgICAgICAgICByZW1vdmVUcmFjayxcclxuICAgICAgICAgICAgY2xlYXJUcmFja3MsXHJcbiAgICAgICAgICAgIHRvZ2dsZVBsYXksXHJcbiAgICAgICAgICAgIHN0b3AsXHJcbiAgICAgICAgICAgIHNlZWssXHJcbiAgICAgICAgICAgIHNldFRyYWNrVm9sdW1lLFxyXG4gICAgICAgICAgICB0b2dnbGVUcmFja011dGUsXHJcbiAgICAgICAgICAgIHRvZ2dsZVRyYWNrU29sbyxcclxuICAgICAgICAgICAgc2V0VmlkZW9FbGVtZW50OiAoZWwpID0+IHZpZGVvUmVmLmN1cnJlbnQgPSBlbCxcclxuICAgICAgICAgICAgbWFzdGVyVm9sdW1lLFxyXG4gICAgICAgICAgICBzZXRNYXN0ZXJWb2x1bWUsXHJcbiAgICAgICAgICAgIHBsYXlsaXN0LFxyXG4gICAgICAgICAgICBhY3RpdmVTb25nSWQsXHJcbiAgICAgICAgICAgIGFkZFNvbmdUb1BsYXlsaXN0LFxyXG4gICAgICAgICAgICByZW1vdmVTb25nRnJvbVBsYXlsaXN0LFxyXG4gICAgICAgICAgICBsb2FkU29uZ1xyXG4gICAgICAgIH19PlxyXG4gICAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgPC9BdWRpb0VuZ2luZUNvbnRleHQuUHJvdmlkZXI+XHJcbiAgICApO1xyXG59O1xyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJBdWRpb0VuZ2luZUNvbnRleHQiLCJ1c2VBdWRpb0VuZ2luZSIsImNvbnRleHQiLCJFcnJvciIsIkF1ZGlvRW5naW5lUHJvdmlkZXIiLCJjaGlsZHJlbiIsInRyYWNrcyIsInNldFRyYWNrcyIsImlzUGxheWluZyIsInNldElzUGxheWluZyIsImN1cnJlbnRUaW1lIiwic2V0Q3VycmVudFRpbWUiLCJkdXJhdGlvbiIsInNldER1cmF0aW9uIiwibWFzdGVyVm9sdW1lIiwic2V0TWFzdGVyVm9sdW1lIiwicGxheWxpc3QiLCJzZXRQbGF5bGlzdCIsImFjdGl2ZVNvbmdJZCIsInNldEFjdGl2ZVNvbmdJZCIsImF1ZGlvQ29udGV4dFJlZiIsInNvdXJjZU5vZGVzUmVmIiwiTWFwIiwiZ2Fpbk5vZGVzUmVmIiwibWFzdGVyR2FpblJlZiIsInZpZGVvUmVmIiwic3RhcnRUaW1lUmVmIiwicGF1c2VUaW1lUmVmIiwiYW5pbWF0aW9uRnJhbWVSZWYiLCJBdWRpb0N0eCIsIndpbmRvdyIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsImN1cnJlbnQiLCJjcmVhdGVHYWluIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwiY2xvc2UiLCJnYWluIiwidmFsdWUiLCJnZXRUcmFja0NvbG9yIiwibmFtZSIsIm4iLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYWRkVHJhY2siLCJmaWxlIiwiYXJyYXlCdWZmZXIiLCJhdWRpb0J1ZmZlciIsImRlY29kZUF1ZGlvRGF0YSIsIm5ld1RyYWNrIiwiaWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiYnVmZmVyIiwidm9sdW1lIiwibXV0ZWQiLCJzb2xvZWQiLCJjb2xvciIsInByZXYiLCJNYXRoIiwibWF4IiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImFkZFZpZGVvVHJhY2siLCJ2aWRlb0ZpbGUiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ2aWRlb1RyYWNrIiwidW5kZWZpbmVkIiwiYXVkaW9UcmFjayIsInNsaWNlIiwiaXNWaWRlb0F1ZGlvIiwid2FybiIsIm5ld1RyYWNrcyIsInB1c2giLCJjdXN0b21FdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZGlzcGF0Y2hFdmVudCIsInRlbXBWaWRlbyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIm9ubG9hZGVkbWV0YWRhdGEiLCJjbGVhclRyYWNrcyIsInN0b3BBdWRpb0ludGVybmFsIiwiZm9yRWFjaCIsInNvdXJjZSIsInN0b3AiLCJjbGVhciIsInBsYXlBdWRpbyIsInN0YXJ0T2Zmc2V0Iiwic3RhdGUiLCJyZXN1bWUiLCJhbnlTb2xvIiwic29tZSIsInQiLCJ0cmFjayIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsImdhaW5Ob2RlIiwic2hvdWxkTG9naWNhbGx5TXV0ZSIsInN0YXJ0Iiwic2V0Iiwib25lbmRlZCIsInN0b3BBdWRpbyIsInRvZ2dsZVBsYXkiLCJwYXVzZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicGxheSIsImNhdGNoIiwidXBkYXRlIiwibm93IiwiY2FsY3VsYXRlZFRpbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZWVrIiwidGltZSIsIndhc1BsYXlpbmciLCJ0YXJnZXRWb2x1bWUiLCJnZXQiLCJjYW5jZWxTY2hlZHVsZWRWYWx1ZXMiLCJzZXRUYXJnZXRBdFRpbWUiLCJzZXRUcmFja1ZvbHVtZSIsIm1hcCIsInRvZ2dsZVRyYWNrTXV0ZSIsInRvZ2dsZVRyYWNrU29sbyIsInJlbW92ZVRyYWNrIiwiZmlsdGVyIiwiYWRkU29uZ1RvUGxheWxpc3QiLCJzb25nIiwicmVtb3ZlU29uZ0Zyb21QbGF5bGlzdCIsInMiLCJsb2FkU29uZyIsImZpbmQiLCJzdGVtRmlsZSIsInN0ZW1GaWxlcyIsInRyYWNrTmFtZSIsInJlcGxhY2UiLCJQcm92aWRlciIsInNldFZpZGVvRWxlbWVudCIsImVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useAudioEngine.tsx\n"));

/***/ })

});